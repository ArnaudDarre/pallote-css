// —————————————————————————————————————————————————————————————————
// elements
// active
// show
// direction
// dense
// navbar
// —————————————————————————————————————————————————————————————————

// —————————————————————————————————————————————————————————————————
// elements
// —————————————————————————————————————————————————————————————————

.nav,
.nav__dropdown {

  ul {
    list-style: none;
  }
  
  li {
    display: flex;
    margin-left: 0;
    padding-top: 0;
  }
}

.nav {

  li:not(:first-child) {
    margin-left: $spacing-xs;
  }
}

.nav {
  width: fit-content;

  &__container,
  &__group {
    display: flex;
  }

  &__item,
  &__trigger,
  &__dropdown {
    border-radius: $border-radius-md;
  }
  
  &__item,
  &__trigger {
    @extend %caption;
    font-weight: $font-bold;
    white-space: nowrap;
    cursor: pointer;
    display: inline-flex;
    position: relative;
    line-height: 1;
    height: $nav-item*2;
    padding: $nav-item*0.5 $nav-item;
    // override ul & li styling
    margin-left: 0;
    width: 100%;

    &:hover { background-color: $hover; }
  }

  &__dropdown {
    display: flex;
    flex-direction: column;
    position: relative;
    // override ul & li styling
    padding-top: 0;

    li:not(:first-child) {
      margin-left: 0;
      margin-top: $spacing-xs;
    }
  }

  &__trigger {
    padding-right: $nav-item*2;
    
    &:after {
      @include calc(top, '50% -' $spacing-xxs);
      content: '';
      display: inline-block;
      position: absolute;
      right: $nav-item*0.75;
      border: solid $text;
      border-width: 0 $spacing-xxs $spacing-xxs 0;
      padding: $spacing-xxs;
      transform: rotate(45deg) translateX(-50%);
    }
  }
  
  &__target {
    display: none;
    text-align: left;
    flex-direction: column;
    padding: 0 $nav-item*0.5 $nav-item*0.5 $nav-item*0.5;

    .nav__item {
      border-radius: $border-radius-sm;
      padding-right: $nav-item*0.5;
      padding-left: $nav-item*0.5;
      
      &:after, 
      &:before { display: none; }

      &:not(:first-child) { margin-top: $spacing-xs; }
    }
  }
}

// —————————————————————————————————————————————————————————————————
// active
// —————————————————————————————————————————————————————————————————

.js-active.nav {

  &__item,
  &__trigger {
    color: $primary;
    background-color: $hover;
  }

  .nav__dropdown &__trigger:after {
    border-color: $primary;
  }
}

// —————————————————————————————————————————————————————————————————
// show
// —————————————————————————————————————————————————————————————————

.nav__dropdown.js-show {
  background-color: $hover;

  > .nav {

    &__trigger {
      background-color: transparent;
    }

    &__target {
      display: flex;
    }
  }
}

// —————————————————————————————————————————————————————————————————
// direction
// —————————————————————————————————————————————————————————————————

.nav--portrait {
  width: 100%;
  flex-direction: column;

  li:not(:first-child) {
    margin-left: 0;
    margin-top: $spacing-xs;
  }

  .nav {

    &__group {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      list-style: none;

      &:not(:first-child) {
        margin-top: $nav-item;
      }  
    }
  
    &__trigger {
      width: 100%;
    }
  }
}

// —————————————————————————————————————————————————————————————————
// dense
// —————————————————————————————————————————————————————————————————

.nav--dense {

  &.nav--dense {

    li:not(:first-child) {
      margin-top: $spacing-xxs;
    }
  }

  .nav {

    &__item,
    &__trigger,
    &__dropdown {
      border-radius: $border-radius-sm;
    }

    &__item,
    &__trigger {
      padding: $spacing-xs $spacing-sm;
      height: $nav-item*1.5;
    }

    &__dropdown .nav {
    
      &__trigger:after {
        right: $nav-item*0.5;
      }
    
      &__target {
        padding: 0 $nav-item*0.25 $nav-item*0.25 $nav-item*0.25;
   
        .nav__item {
          padding-right: $nav-item*0.25;
          padding-left: $nav-item*0.25;
    
          &:not(:first-child) { margin-top: $spacing-xs; }
        }
      }
    }

    &__trigger {
      padding-right: $nav-item*1.5;
    }
  }
}

// —————————————————————————————————————————————————————————————————
// navbar
// —————————————————————————————————————————————————————————————————

.navbar {

  .nav {
    width: auto;

    @include responsive(up, tablet) {
      height: 100%;
    }

    &__container {

      @include responsive(up, tablet) {
        height: 100%;
        align-items: center;
      }

      @include responsive(down, tablet) {
        @include calc(max-height, '100vh - '$spacing-xl*3);
        align-items: flex-start;
        overflow: scroll;
        width: 100%;
        margin-top: $nav-item;
        margin-bottom: $nav-item;
        flex-direction: column;
        width: 100%;
      }
    }

    &__item,
    &__trigger {

      @include responsive(down, tablet) {
        height: auto;
        padding-top: $nav-item*0.75;
        padding-bottom: $nav-item*0.75;
      }
    }

    &__item {

      @include responsive(down, tablet) {

        &.js-active {
          background-color: $hover;
        }
      }

      .js-active:before {
        
        @include responsive(up, tablet) {
          content: "";
          position: absolute;
          bottom: -$nav-item;
          left: 0;
          width: 100%;
          height: $spacing-xs;
          background-color: $primary;
          border-top-left-radius: $border-radius-sm;
          border-top-right-radius: $border-radius-sm;
        }
      }
    }

    &__dropdown {

      @include responsive(up, tablet) {
        
        .nav__target {
          @include calc(top, '100% +' $nav-item*0.5);
          position: absolute;
          left: 0;
          width: $spacing-xl*2.5;
          padding: $nav-item*0.5;
          border-radius: $border-radius-md;
          border: $border;
          z-index: 1;              
          background-color: $background-paper;
        }
      }
    }
  }
}
